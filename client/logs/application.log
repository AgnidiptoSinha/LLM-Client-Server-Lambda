2024-11-30 14:55:30.197 [ConversationSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 14:55:30.356 [main] ERROR Main$ - Fatal error occurred
com.typesafe.config.ConfigException$Missing: application.conf @ file:/C:/Work%20Modules/Coding/Scala/root/client/target/scala-2.13/classes/application.conf: 10: No configuration setting found for key 'ec2.url'
	at com.typesafe.config.impl.SimpleConfig.findKeyOrNull(SimpleConfig.java:157)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:175)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:181)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:189)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:194)
	at com.typesafe.config.impl.SimpleConfig.getString(SimpleConfig.java:251)
	at conversation.config.AppConfig$.load(AppConfig.scala:30)
	at Main$.delayedEndpoint$Main$1(Main.scala:26)
	at Main$delayedInit$body.apply(Main.scala:13)
	at scala.Function0.apply$mcV$sp(Function0.scala:42)
	at scala.Function0.apply$mcV$sp$(Function0.scala:42)
	at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)
	at scala.App.$anonfun$main$1(App.scala:98)
	at scala.App.$anonfun$main$1$adapted(App.scala:98)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:576)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:574)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
	at scala.App.main(App.scala:98)
	at scala.App.main$(App.scala:96)
	at Main$.main(Main.scala:13)
	at Main.main(Main.scala)
2024-11-30 15:08:28.662 [ConversationSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 15:08:28.801 [main] ERROR Main$ - Fatal error occurred
com.typesafe.config.ConfigException$Missing: application.conf @ file:/C:/Work%20Modules/Coding/Scala/root/client/target/scala-2.13/classes/application.conf: 10: No configuration setting found for key 'ec2.url'
	at com.typesafe.config.impl.SimpleConfig.findKeyOrNull(SimpleConfig.java:157)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:175)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:181)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:189)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:194)
	at com.typesafe.config.impl.SimpleConfig.getString(SimpleConfig.java:251)
	at conversation.config.AppConfig$.load(AppConfig.scala:30)
	at Main$.delayedEndpoint$Main$1(Main.scala:25)
	at Main$delayedInit$body.apply(Main.scala:12)
	at scala.Function0.apply$mcV$sp(Function0.scala:42)
	at scala.Function0.apply$mcV$sp$(Function0.scala:42)
	at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)
	at scala.App.$anonfun$main$1(App.scala:98)
	at scala.App.$anonfun$main$1$adapted(App.scala:98)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:576)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:574)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
	at scala.App.main(App.scala:98)
	at scala.App.main$(App.scala:96)
	at Main$.main(Main.scala:12)
	at Main.main(Main.scala)
2024-11-30 15:15:02.546 [ConversationSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 15:15:02.681 [main] ERROR Main$ - Fatal error occurred
com.typesafe.config.ConfigException$Missing: application.conf @ file:/C:/Work%20Modules/Coding/Scala/root/client/target/scala-2.13/classes/application.conf: 10: No configuration setting found for key 'ec2.url'
	at com.typesafe.config.impl.SimpleConfig.findKeyOrNull(SimpleConfig.java:157)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:175)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:181)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:189)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:194)
	at com.typesafe.config.impl.SimpleConfig.getString(SimpleConfig.java:251)
	at conversation.config.AppConfig$.load(AppConfig.scala:30)
	at Main$.delayedEndpoint$Main$1(Main.scala:25)
	at Main$delayedInit$body.apply(Main.scala:12)
	at scala.Function0.apply$mcV$sp(Function0.scala:42)
	at scala.Function0.apply$mcV$sp$(Function0.scala:42)
	at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)
	at scala.App.$anonfun$main$1(App.scala:98)
	at scala.App.$anonfun$main$1$adapted(App.scala:98)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:576)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:574)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
	at scala.App.main(App.scala:98)
	at scala.App.main$(App.scala:96)
	at Main$.main(Main.scala:12)
	at Main.main(Main.scala)
2024-11-30 15:33:02.203 [ConversationSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 15:33:02.333 [main] ERROR Main$ - Fatal error occurred
com.typesafe.config.ConfigException$Missing: application.conf @ file:/C:/Work%20Modules/Coding/Scala/root/client/target/scala-2.13/classes/application.conf: 10: No configuration setting found for key 'ec2.url'
	at com.typesafe.config.impl.SimpleConfig.findKeyOrNull(SimpleConfig.java:157)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:175)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:181)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:189)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:194)
	at com.typesafe.config.impl.SimpleConfig.getString(SimpleConfig.java:251)
	at conversation.config.AppConfig$.load(AppConfig.scala:30)
	at Main$.delayedEndpoint$Main$1(Main.scala:25)
	at Main$delayedInit$body.apply(Main.scala:12)
	at scala.Function0.apply$mcV$sp(Function0.scala:42)
	at scala.Function0.apply$mcV$sp$(Function0.scala:42)
	at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)
	at scala.App.$anonfun$main$1(App.scala:98)
	at scala.App.$anonfun$main$1$adapted(App.scala:98)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:576)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:574)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
	at scala.App.main(App.scala:98)
	at scala.App.main$(App.scala:96)
	at Main$.main(Main.scala:12)
	at Main.main(Main.scala)
2024-11-30 15:34:07.075 [ConversationSystem-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 15:34:07.144 [main] ERROR Main$ - Fatal error occurred
com.typesafe.config.ConfigException$Missing: application.conf @ jar:file:/C:/Work%20Modules/Coding/Scala/root/client/target/scala-2.13/llm-conversation-agent.jar!/application.conf: 10: No configuration setting found for key 'ec2.url'
	at com.typesafe.config.impl.SimpleConfig.findKeyOrNull(SimpleConfig.java:157)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:175)
	at com.typesafe.config.impl.SimpleConfig.findOrNull(SimpleConfig.java:181)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:189)
	at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:194)
	at com.typesafe.config.impl.SimpleConfig.getString(SimpleConfig.java:251)
	at conversation.config.AppConfig$.load(AppConfig.scala:30)
	at Main$.delayedEndpoint$Main$1(Main.scala:25)
	at Main$delayedInit$body.apply(Main.scala:12)
	at scala.Function0.apply$mcV$sp(Function0.scala:42)
	at scala.Function0.apply$mcV$sp$(Function0.scala:42)
	at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)
	at scala.App.$anonfun$main$1(App.scala:98)
	at scala.App.$anonfun$main$1$adapted(App.scala:98)
	at scala.collection.IterableOnceOps.foreach(IterableOnce.scala:576)
	at scala.collection.IterableOnceOps.foreach$(IterableOnce.scala:574)
	at scala.collection.AbstractIterable.foreach(Iterable.scala:933)
	at scala.App.main(App.scala:98)
	at scala.App.main$(App.scala:96)
	at Main$.main(Main.scala:12)
	at Main.main(Main.scala)
2024-11-30 19:51:01.352 [ConversationalAgentSpec-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 19:51:01.541 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test query (Retries left: 3)
2024-11-30 19:51:01.767 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:51:02.239 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: Test response
2024-11-30 19:51:02.240 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: Test response
2024-11-30 19:51:02.614 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "Test response",
  "raw" : false
}
2024-11-30 19:51:05.127 [ConversationalAgentSpec-akka.actor.default-dispatcher-3] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:51:05.414 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalAgentSpec.$anonfun$new$6(ConversationalAgentSpec.scala:50)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.wordspec.AnyWordSpecLike$$anon$3.apply(AnyWordSpecLike.scala:1240)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.wordspec.AnyWordSpec.withFixture(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.invokeWithFixture$1(AnyWordSpecLike.scala:1238)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTest$1(AnyWordSpecLike.scala:1250)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest(AnyWordSpecLike.scala:1250)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest$(AnyWordSpecLike.scala:1232)
	at org.scalatest.wordspec.AnyWordSpec.runTest(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTests$1(AnyWordSpecLike.scala:1309)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests(AnyWordSpecLike.scala:1309)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests$(AnyWordSpecLike.scala:1308)
	at org.scalatest.wordspec.AnyWordSpec.runTests(AnyWordSpec.scala:1880)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.wordspec.AnyWordSpec.org$scalatest$wordspec$AnyWordSpecLike$$super$run(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$run$1(AnyWordSpecLike.scala:1354)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.wordspec.AnyWordSpecLike.run(AnyWordSpecLike.scala:1354)
	at org.scalatest.wordspec.AnyWordSpecLike.run$(AnyWordSpecLike.scala:1352)
	at conversation.ConversationalAgentSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:14)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalAgentSpec.run(ConversationalAgentSpec.scala:14)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 19:51:05.792 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: Test response
2024-11-30 19:51:05.793 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about response?
2024-11-30 19:51:05.839 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: 11bc1105-f4ff-4b2f-8572-cbff20351095
2024-11-30 19:51:05.840 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: initial prompt (Retries left: 3)
2024-11-30 19:51:05.843 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:51:05.853 [ConversationalAgentSpec-akka.actor.default-dispatcher-19] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:51:06.014 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 19:51:06.015 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/generate
2024-11-30 19:51:06.182 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: 
2024-11-30 19:51:06.183 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: 
2024-11-30 19:51:06.187 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "",
  "raw" : false
}
2024-11-30 19:51:06.191 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalAgentSpec.$anonfun$new$16(ConversationalAgentSpec.scala:104)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.wordspec.AnyWordSpecLike$$anon$3.apply(AnyWordSpecLike.scala:1240)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.wordspec.AnyWordSpec.withFixture(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.invokeWithFixture$1(AnyWordSpecLike.scala:1238)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTest$1(AnyWordSpecLike.scala:1250)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest(AnyWordSpecLike.scala:1250)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest$(AnyWordSpecLike.scala:1232)
	at org.scalatest.wordspec.AnyWordSpec.runTest(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTests$1(AnyWordSpecLike.scala:1309)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests(AnyWordSpecLike.scala:1309)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests$(AnyWordSpecLike.scala:1308)
	at org.scalatest.wordspec.AnyWordSpec.runTests(AnyWordSpec.scala:1880)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.wordspec.AnyWordSpec.org$scalatest$wordspec$AnyWordSpecLike$$super$run(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$run$1(AnyWordSpecLike.scala:1354)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.wordspec.AnyWordSpecLike.run(AnyWordSpecLike.scala:1354)
	at org.scalatest.wordspec.AnyWordSpecLike.run$(AnyWordSpecLike.scala:1352)
	at conversation.ConversationalAgentSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:14)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalAgentSpec.run(ConversationalAgentSpec.scala:14)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 19:51:06.201 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: 
2024-11-30 19:51:06.202 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about what you mean?
2024-11-30 19:51:06.210 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: 1c253d79-0347-4f7c-b1b6-3b49766e24fc
2024-11-30 19:51:06.211 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test prompt (Retries left: 3)
2024-11-30 19:51:06.212 [pool-5-thread-6-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:51:06.218 [ConversationalAgentSpec-akka.actor.default-dispatcher-7] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:51:06.388 [ConversationalAgentSpec-akka.actor.default-dispatcher-23] INFO  akka.actor.CoordinatedShutdown - Running CoordinatedShutdown with reason [ActorSystemTerminateReason]
2024-11-30 19:56:07.449 [ConversationalAgentSpec-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 19:56:07.616 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test query (Retries left: 3)
2024-11-30 19:56:07.795 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:56:08.255 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: Test response
2024-11-30 19:56:08.256 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: Test response
2024-11-30 19:56:08.618 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "Test response",
  "raw" : false
}
2024-11-30 19:56:11.145 [ConversationalAgentSpec-akka.actor.default-dispatcher-3] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:56:11.388 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalAgentSpec.$anonfun$new$6(ConversationalAgentSpec.scala:50)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.wordspec.AnyWordSpecLike$$anon$3.apply(AnyWordSpecLike.scala:1240)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.wordspec.AnyWordSpec.withFixture(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.invokeWithFixture$1(AnyWordSpecLike.scala:1238)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTest$1(AnyWordSpecLike.scala:1250)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest(AnyWordSpecLike.scala:1250)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest$(AnyWordSpecLike.scala:1232)
	at org.scalatest.wordspec.AnyWordSpec.runTest(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTests$1(AnyWordSpecLike.scala:1309)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests(AnyWordSpecLike.scala:1309)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests$(AnyWordSpecLike.scala:1308)
	at org.scalatest.wordspec.AnyWordSpec.runTests(AnyWordSpec.scala:1880)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.wordspec.AnyWordSpec.org$scalatest$wordspec$AnyWordSpecLike$$super$run(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$run$1(AnyWordSpecLike.scala:1354)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.wordspec.AnyWordSpecLike.run(AnyWordSpecLike.scala:1354)
	at org.scalatest.wordspec.AnyWordSpecLike.run$(AnyWordSpecLike.scala:1352)
	at conversation.ConversationalAgentSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:14)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalAgentSpec.run(ConversationalAgentSpec.scala:14)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 19:56:11.397 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: Test response
2024-11-30 19:56:11.399 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about response?
2024-11-30 19:56:11.435 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: 1c0af862-8d0b-4f0d-a7eb-d07c5c070453
2024-11-30 19:56:11.436 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: initial prompt (Retries left: 3)
2024-11-30 19:56:11.437 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:56:11.442 [ConversationalAgentSpec-akka.actor.default-dispatcher-17] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:56:11.596 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 19:56:11.598 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/generate
2024-11-30 19:56:11.751 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: 
2024-11-30 19:56:11.752 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: 
2024-11-30 19:56:11.754 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "",
  "raw" : false
}
2024-11-30 19:56:11.756 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalAgentSpec.$anonfun$new$16(ConversationalAgentSpec.scala:104)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.wordspec.AnyWordSpecLike$$anon$3.apply(AnyWordSpecLike.scala:1240)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.wordspec.AnyWordSpec.withFixture(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.invokeWithFixture$1(AnyWordSpecLike.scala:1238)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTest$1(AnyWordSpecLike.scala:1250)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest(AnyWordSpecLike.scala:1250)
	at org.scalatest.wordspec.AnyWordSpecLike.runTest$(AnyWordSpecLike.scala:1232)
	at org.scalatest.wordspec.AnyWordSpec.runTest(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$runTests$1(AnyWordSpecLike.scala:1309)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests(AnyWordSpecLike.scala:1309)
	at org.scalatest.wordspec.AnyWordSpecLike.runTests$(AnyWordSpecLike.scala:1308)
	at org.scalatest.wordspec.AnyWordSpec.runTests(AnyWordSpec.scala:1880)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.wordspec.AnyWordSpec.org$scalatest$wordspec$AnyWordSpecLike$$super$run(AnyWordSpec.scala:1880)
	at org.scalatest.wordspec.AnyWordSpecLike.$anonfun$run$1(AnyWordSpecLike.scala:1354)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.wordspec.AnyWordSpecLike.run(AnyWordSpecLike.scala:1354)
	at org.scalatest.wordspec.AnyWordSpecLike.run$(AnyWordSpecLike.scala:1352)
	at conversation.ConversationalAgentSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:14)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalAgentSpec.run(ConversationalAgentSpec.scala:14)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 19:56:11.762 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: 
2024-11-30 19:56:11.762 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about what you mean?
2024-11-30 19:56:11.768 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: d5a8233c-8185-4d8e-8020-3c4d11de98b7
2024-11-30 19:56:11.768 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test prompt (Retries left: 3)
2024-11-30 19:56:11.769 [pool-5-thread-11-ScalaTest-running-ConversationalAgentSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://test-ec2/generate
2024-11-30 19:56:11.790 [ConversationalAgentSpec-akka.actor.default-dispatcher-20] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(test-ec2:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: test-ec2. Retrying in 5 seconds...
2024-11-30 19:56:11.954 [ConversationalAgentSpec-akka.actor.default-dispatcher-25] INFO  akka.actor.CoordinatedShutdown - Running CoordinatedShutdown with reason [ActorSystemTerminateReason]
2024-11-30 20:02:15.819 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables set
2024-11-30 20:02:15.978 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Configuration loaded and validated successfully
2024-11-30 20:02:16.000 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables cleaned up
2024-11-30 20:02:16.001 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables set
2024-11-30 20:02:16.022 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables cleaned up
2024-11-30 20:02:16.023 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables set
2024-11-30 20:02:16.035 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Configuration constraints validated
2024-11-30 20:02:16.037 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables cleaned up
2024-11-30 20:02:16.038 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables set
2024-11-30 20:02:16.040 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables cleaned up
2024-11-30 20:02:16.041 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables set
2024-11-30 20:02:16.048 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Custom configuration file test completed
2024-11-30 20:02:16.050 [pool-5-thread-8-ScalaTest-running-AppConfigSpec] INFO  conversation.config.AppConfigSpec - Test environment variables cleaned up
2024-11-30 20:17:27.794 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 20:17:27.949 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test query (Retries left: 3)
2024-11-30 20:17:28.158 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:28.849 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:30.649 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:30.649 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 5 seconds...
2024-11-30 20:17:33.504 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 20:17:33.504 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:17:33.521 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: Some LLM response
2024-11-30 20:17:33.524 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: Some LLM response
2024-11-30 20:17:33.888 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "Some LLM response",
  "raw" : false
}
2024-11-30 20:17:33.964 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] WARN  io.github.ollama4j.OllamaAPI - Status code: 404 (Not Found)
2024-11-30 20:17:34.002 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] ERROR io.github.ollama4j.OllamaAPI - Status code 404
2024-11-30 20:17:34.006 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: model 'test-model' not found
io.github.ollama4j.exceptions.OllamaBaseException: model 'test-model' not found
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:106)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$3(ConversationalAgentSpec.scala:71)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
2024-11-30 20:17:34.021 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: Some LLM response
2024-11-30 20:17:34.022 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about response?
2024-11-30 20:17:34.040 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: 
2024-11-30 20:17:34.041 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: 
2024-11-30 20:17:34.044 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "",
  "raw" : false
}
2024-11-30 20:17:35.674 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] DEBUG conversation.services.EC2Service - Processing query with prompt: test query (Retries left: 2)
2024-11-30 20:17:35.675 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:35.679 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:35.682 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:35.683 [ConversationalSystemSpec-akka.actor.default-dispatcher-7] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 10 seconds...
2024-11-30 20:17:36.266 [ConversationalSystemSpec-akka.actor.default-dispatcher-16] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(invalid-url:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: invalid-url. Retrying in 5 seconds...
2024-11-30 20:17:36.768 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$4(ConversationalAgentSpec.scala:78)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 20:17:36.797 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: 
2024-11-30 20:17:36.798 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about what you mean?
2024-11-30 20:17:36.819 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-17-36.json
2024-11-30 20:17:36.821 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-17-36.txt
2024-11-30 20:17:36.823 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Conversation saved to files: 2024-11-30_20-17-36.json and 2024-11-30_20-17-36.txt
2024-11-30 20:17:36.843 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: a6590a0e-6146-4320-a105-65609983718a
2024-11-30 20:17:36.844 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 20:17:36.845 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:36.846 [ConversationalSystemSpec-akka.actor.default-dispatcher-15] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:36.850 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:36.854 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 5 seconds...
2024-11-30 20:17:41.287 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 2)
2024-11-30 20:17:41.287 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:17:41.293 [ConversationalSystemSpec-akka.actor.default-dispatcher-15] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(invalid-url:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: invalid-url. Retrying in 10 seconds...
2024-11-30 20:17:41.868 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 2)
2024-11-30 20:17:41.869 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:41.874 [ConversationalSystemSpec-akka.actor.default-dispatcher-18] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:41.876 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:41.878 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 10 seconds...
2024-11-30 20:17:45.697 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] DEBUG conversation.services.EC2Service - Processing query with prompt: test query (Retries left: 1)
2024-11-30 20:17:45.698 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:45.699 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:45.708 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:45.709 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 20 seconds...
2024-11-30 20:17:46.852 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: 5586408f-0ce2-4fc0-8a17-b5ea40ecee2b
2024-11-30 20:17:46.852 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test1 (Retries left: 3)
2024-11-30 20:17:46.853 [pool-5-thread-10-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:46.854 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:46.856 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:46.856 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 5 seconds...
2024-11-30 20:17:51.315 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 1)
2024-11-30 20:17:51.316 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:17:51.870 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] DEBUG conversation.services.EC2Service - Processing query with prompt: test1 (Retries left: 2)
2024-11-30 20:17:51.871 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:17:51.875 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:17:51.878 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:17:51.878 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 10 seconds...
2024-11-30 20:17:51.890 [ConversationalSystemSpec-akka.actor.default-dispatcher-25] INFO  akka.actor.CoordinatedShutdown - Running CoordinatedShutdown with reason [ActorSystemTerminateReason]
2024-11-30 20:17:51.896 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 1)
2024-11-30 20:17:51.896 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:21:49.367 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 20:21:49.512 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 20:21:49.700 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:21:49.957 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: Some LLM response
2024-11-30 20:21:49.959 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: Some LLM response
2024-11-30 20:21:50.408 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "Some LLM response",
  "raw" : false
}
2024-11-30 20:21:50.476 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] WARN  io.github.ollama4j.OllamaAPI - Status code: 404 (Not Found)
2024-11-30 20:21:50.516 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] ERROR io.github.ollama4j.OllamaAPI - Status code 404
2024-11-30 20:21:50.519 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: model 'test-model' not found
io.github.ollama4j.exceptions.OllamaBaseException: model 'test-model' not found
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:106)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$2(ConversationalAgentSpec.scala:64)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
2024-11-30 20:21:50.522 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: Some LLM response
2024-11-30 20:21:50.524 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about response?
2024-11-30 20:21:50.539 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: 
2024-11-30 20:21:50.540 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: 
2024-11-30 20:21:50.544 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "",
  "raw" : false
}
2024-11-30 20:21:53.029 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(invalid-url:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: invalid-url. Retrying in 5 seconds...
2024-11-30 20:21:53.273 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$3(ConversationalAgentSpec.scala:71)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 20:21:53.281 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: 
2024-11-30 20:21:53.281 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about what you mean?
2024-11-30 20:21:53.303 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-21-53.json
2024-11-30 20:21:53.305 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-21-53.txt
2024-11-30 20:21:53.306 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Conversation saved to files: 2024-11-30_20-21-53.json and 2024-11-30_20-21-53.txt
2024-11-30 20:21:53.315 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.ConversationalAgent - Starting new conversation with ID: e91b04f7-d8cb-4725-bc29-b38751ed5e0b
2024-11-30 20:21:53.316 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test1 (Retries left: 3)
2024-11-30 20:21:53.317 [pool-5-thread-13-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://localhost:8080/test
2024-11-30 20:21:53.355 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] WARN  akka.actor.ActorSystemImpl - Explicitly set HTTP header 'Content-Type: application/json' is ignored, explicit `Content-Type` header is not allowed. Set `HttpRequest.entity.contentType` instead.
2024-11-30 20:21:53.386 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] ERROR conversation.services.EC2Service - Unexpected status code from EC2: 403 Forbidden
2024-11-30 20:21:53.387 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] WARN  conversation.services.EC2Service - Request failed: Unexpected status code: 403 Forbidden. Retrying in 5 seconds...
2024-11-30 20:21:58.048 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 2)
2024-11-30 20:21:58.049 [ConversationalSystemSpec-akka.actor.default-dispatcher-22] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:21:58.054 [ConversationalSystemSpec-akka.actor.default-dispatcher-21] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(invalid-url:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: invalid-url. Retrying in 10 seconds...
2024-11-30 20:21:58.354 [ConversationalSystemSpec-akka.actor.default-dispatcher-21] INFO  akka.actor.CoordinatedShutdown - Running CoordinatedShutdown with reason [ActorSystemTerminateReason]
2024-11-30 20:23:08.880 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
2024-11-30 20:23:09.051 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.EC2Service - Processing query with prompt: test (Retries left: 3)
2024-11-30 20:23:09.256 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.EC2Service - Sending request to EC2: http://invalid-url/test
2024-11-30 20:23:09.549 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: Some LLM response
2024-11-30 20:23:09.551 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: Some LLM response
2024-11-30 20:23:10.015 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "Some LLM response",
  "raw" : false
}
2024-11-30 20:23:10.081 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] WARN  io.github.ollama4j.OllamaAPI - Status code: 404 (Not Found)
2024-11-30 20:23:10.117 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] ERROR io.github.ollama4j.OllamaAPI - Status code 404
2024-11-30 20:23:10.120 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: model 'test-model' not found
io.github.ollama4j.exceptions.OllamaBaseException: model 'test-model' not found
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:106)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$2(ConversationalAgentSpec.scala:64)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
2024-11-30 20:23:10.123 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: Some LLM response
2024-11-30 20:23:10.124 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about response?
2024-11-30 20:23:10.143 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating next prompt based on response: 
2024-11-30 20:23:10.144 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Sending prompt to Ollama: 
2024-11-30 20:23:10.148 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  io.github.ollama4j.OllamaAPI - Asking model: {
  "model" : "test-model",
  "options" : {
    "temperature" : 0.4,
    "num_predict" : 50
  },
  "stream" : false,
  "prompt" : "",
  "raw" : false
}
2024-11-30 20:23:12.609 [ConversationalSystemSpec-akka.actor.default-dispatcher-3] WARN  conversation.services.EC2Service - Request failed: Tcp command [Connect(invalid-url:80,None,List(),Some(10 seconds),true)] failed because of java.net.UnknownHostException: invalid-url. Retrying in 5 seconds...
2024-11-30 20:23:12.869 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] ERROR conversation.services.OllamaService - Error generating next prompt: null
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:560)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:119)
	at io.github.ollama4j.models.request.OllamaEndpointCaller.callSync(OllamaEndpointCaller.java:70)
	at io.github.ollama4j.OllamaAPI.generateSyncForOllamaRequestModel(OllamaAPI.java:585)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:357)
	at io.github.ollama4j.OllamaAPI.generate(OllamaAPI.java:373)
	at conversation.services.OllamaService.generateNextPrompt(OllamaService.scala:29)
	at conversation.ConversationalSystemSpec.$anonfun$new$3(ConversationalAgentSpec.scala:71)
	at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
	at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
	at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
	at org.scalatest.Transformer.apply(Transformer.scala:22)
	at org.scalatest.Transformer.apply(Transformer.scala:20)
	at org.scalatest.flatspec.AnyFlatSpecLike$$anon$5.apply(AnyFlatSpecLike.scala:1832)
	at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
	at org.scalatest.TestSuite.withFixture$(TestSuite.scala:195)
	at org.scalatest.flatspec.AnyFlatSpec.withFixture(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.invokeWithFixture$1(AnyFlatSpecLike.scala:1830)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTest$1(AnyFlatSpecLike.scala:1842)
	at org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest(AnyFlatSpecLike.scala:1842)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTest$(AnyFlatSpecLike.scala:1824)
	at org.scalatest.flatspec.AnyFlatSpec.runTest(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$runTests$1(AnyFlatSpecLike.scala:1900)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:390)
	at org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:427)
	at scala.collection.immutable.List.foreach(List.scala:333)
	at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)
	at org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)
	at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests(AnyFlatSpecLike.scala:1900)
	at org.scalatest.flatspec.AnyFlatSpecLike.runTests$(AnyFlatSpecLike.scala:1899)
	at org.scalatest.flatspec.AnyFlatSpec.runTests(AnyFlatSpec.scala:1686)
	at org.scalatest.Suite.run(Suite.scala:1114)
	at org.scalatest.Suite.run$(Suite.scala:1096)
	at org.scalatest.flatspec.AnyFlatSpec.org$scalatest$flatspec$AnyFlatSpecLike$$super$run(AnyFlatSpec.scala:1686)
	at org.scalatest.flatspec.AnyFlatSpecLike.$anonfun$run$1(AnyFlatSpecLike.scala:1945)
	at org.scalatest.SuperEngine.runImpl(Engine.scala:535)
	at org.scalatest.flatspec.AnyFlatSpecLike.run(AnyFlatSpecLike.scala:1945)
	at org.scalatest.flatspec.AnyFlatSpecLike.run$(AnyFlatSpecLike.scala:1943)
	at conversation.ConversationalSystemSpec.org$scalatest$BeforeAndAfterAll$$super$run(ConversationalAgentSpec.scala:19)
	at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)
	at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)
	at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)
	at conversation.ConversationalSystemSpec.run(ConversationalAgentSpec.scala:19)
	at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)
	at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)
	at sbt.TestRunner.runTest$1(TestFramework.scala:153)
	at sbt.TestRunner.run(TestFramework.scala:168)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.$anonfun$apply$1(TestFramework.scala:336)
	at sbt.TestFramework$.sbt$TestFramework$$withContextLoader(TestFramework.scala:296)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFramework$$anon$3$$anonfun$$lessinit$greater$1.apply(TestFramework.scala:336)
	at sbt.TestFunction.apply(TestFramework.scala:348)
	at sbt.Tests$.$anonfun$toTask$1(Tests.scala:436)
	at sbt.std.Transform$$anon$3.$anonfun$apply$2(Transform.scala:47)
	at sbt.std.Transform$$anon$4.work(Transform.scala:69)
	at sbt.Execute.$anonfun$submit$2(Execute.scala:283)
	at sbt.internal.util.ErrorHandling$.wideConvert(ErrorHandling.scala:24)
	at sbt.Execute.work(Execute.scala:292)
	at sbt.Execute.$anonfun$submit$1(Execute.scala:283)
	at sbt.ConcurrentRestrictions$$anon$4.$anonfun$submitValid$1(ConcurrentRestrictions.scala:265)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:65)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1020)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:179)
	at java.net.http/jdk.internal.net.http.Http1Exchange.sendHeadersAsync(Http1Exchange.java:238)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$8(Exchange.java:488)
	at java.net.http/jdk.internal.net.http.Exchange.checkFor407(Exchange.java:368)
	at java.net.http/jdk.internal.net.http.Exchange.lambda$responseAsyncImpl0$9(Exchange.java:492)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl0(Exchange.java:492)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsyncImpl(Exchange.java:344)
	at java.net.http/jdk.internal.net.http.Exchange.responseAsync(Exchange.java:336)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:347)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:384)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:930)
	at java.base/java.util.concurrent.CompletableFuture.uniHandleStage(CompletableFuture.java:946)
	at java.base/java.util.concurrent.CompletableFuture.handle(CompletableFuture.java:2268)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsyncImpl(MultiExchange.java:374)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsync0$2(MultiExchange.java:293)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1072)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:152)
	at java.base/java.util.concurrent.CompletableFuture.completeAsync(CompletableFuture.java:2593)
	at java.net.http/jdk.internal.net.http.MultiExchange.responseAsync(MultiExchange.java:246)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.sendAsync(HttpClientImpl.java:633)
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:539)
	... 71 common frames omitted
Caused by: java.nio.channels.UnresolvedAddressException: null
	at java.base/sun.nio.ch.Net.checkAddress(Net.java:131)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:675)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$0(PlainHttpConnection.java:165)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:551)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:167)
	... 96 common frames omitted
2024-11-30 20:23:12.876 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] DEBUG conversation.services.OllamaService - Generating fallback question for response: 
2024-11-30 20:23:12.877 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  conversation.services.OllamaService - Generated fallback question: Could you tell me more about what you mean?
2024-11-30 20:23:12.899 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-23-12.json
2024-11-30 20:23:12.902 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Saved file: C:\Work Modules\Coding\Scala\root\client\conversations\2024-11-30_20-23-12.txt
2024-11-30 20:23:12.903 [pool-5-thread-15-ScalaTest-running-ConversationalSystemSpec] INFO  c.utils.ConversationLogger - Conversation saved to files: 2024-11-30_20-23-12.json and 2024-11-30_20-23-12.txt
2024-11-30 20:23:12.932 [ConversationalSystemSpec-akka.actor.default-dispatcher-20] INFO  akka.actor.CoordinatedShutdown - Running CoordinatedShutdown with reason [ActorSystemTerminateReason]
